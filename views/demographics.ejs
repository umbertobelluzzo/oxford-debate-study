<!-- views/demographics.ejs -->
<!DOCTYPE html>
<html>

<head>
  <title>Oxford-Style Debate Research - Participant Information</title>
  <link rel="stylesheet" href="/styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div class="container" style="width: 800px;">
    <div class="study-card">
      <h1>Participant Information</h1>
      <br>
      <p>This information will be kept confidential and will not be used to
        identify you. Your responses will be pseudonymized (e.g., "Debater D-03") in all research outputs.</p>
      <br>
      <form action="/demographics" method="POST">
        <div class="form-group">
          <label for="age">What is your <b>age</b>?</label>
          <input type="number" id="age" name="age" min="18" max="100" required>
        </div>

        <div class="form-group">
          <label for="gender">What is your <b>gender</b>?</label>
          <select id="gender" name="gender" required>
            <option value="">Please select</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
            <option value="Prefer not to say">Prefer not to say</option>
          </select>
        </div>

        <div class="form-group">
          <label for="english">Is <b>English your first language</b>?</label>
          <select id="english" name="english" required>
            <option value="">Please select</option>
            <option value="Yes">Yes</option>
            <option value="No">No</option>
            <option value="Bilingual from birth">Bilingual from birth</option>
            <option value="Prefer not to say">Prefer not to say</option>
          </select>
        </div>

        <div class="form-group">
          <label for="education">What is the <b>highest level of education</b> you have completed?</label>
          <select id="education" name="education" required>
            <option value="">Please select</option>
            <option value="GCSEs or equivalent">GCSEs or equivalent</option>
            <option value="A-levels or equivalent">A-levels or equivalent</option>
            <option value="Vocational qualification">Vocational qualification</option>
            <option value="Undergraduate degree">Undergraduate degree</option>
            <option value="Postgraduate degree (Master's)">Postgraduate degree (Master's)</option>
            <option value="Doctorate (PhD)">Doctorate (PhD)</option>
            <option value="Other">Other</option>
            <option value="Prefer not to say">Prefer not to say</option>
          </select>
        </div>

        <div class="form-group">
          <label for="debateExperience">What is your <b>level of experience with formal debate</b>?</label>
          <select id="debateExperience" name="debateExperience" required>
            <option value="">Please select</option>
            <option value="No experience">No experience</option>
            <option value="Beginner (some classroom experience)">Beginner (some classroom experience)</option>
            <option value="Intermediate (school/university debate club)">Intermediate (school/university debate club)</option>
            <option value="Advanced (regional competitions)">Advanced (regional competitions)</option>
            <option value="Expert (national/international competitions)">Expert (national/international competitions)</option>
            <option value="Professional (coaching/judging experience)">Professional (coaching/judging experience)</option>
            <option value="Prefer not to say">Prefer not to say</option>
          </select>
        </div>

        <!-- Modified: Show text field for details only when experience is not "No experience" -->
        <div class="form-group" id="debateTrainingSpecifyContainer" style="display: none;">
          <label for="debateTrainingSpecify">Please briefly describe your debate experience:</label>
          <textarea id="debateTrainingSpecify" name="debateTrainingSpecify" rows="2" placeholder="Provide details about your debate training or competition experience..."></textarea>
        </div>

        <div class="form-group">
          <label for="oxfordDebate">How familiar are you with the <b>Oxford-style debate format</b> specifically?</label>
          <select id="oxfordDebate" name="oxfordDebate" required>
            <option value="">Please select</option>
            <option value="Not at all familiar">Not at all familiar</option>
            <option value="Slightly familiar">Slightly familiar</option>
            <option value="Moderately familiar">Moderately familiar</option>
            <option value="Very familiar">Very familiar</option>
            <option value="Expert in this format">Expert in this format</option>
            <option value="Prefer not to say">Prefer not to say</option>
          </select>
        </div>

        <div class="form-group">
          <label for="aiUsage">How often do you <b>use AI tools</b> like ChatGPT, Claude, or other large language models?</label>
          <select id="aiUsage" name="aiUsage" required>
            <option value="">Please select</option>
            <option value="Never used">Never used</option>
            <option value="Rarely (few times a year)">Rarely (few times a year)</option>
            <option value="Occasionally (monthly)">Occasionally (monthly)</option>
            <option value="Regularly (weekly)">Regularly (weekly)</option>
            <option value="Frequently (daily)">Frequently (daily)</option>
            <option value="Very frequently (multiple times daily)">Very frequently (multiple times daily)</option>
            <option value="Prefer not to say">Prefer not to say</option>
          </select>
        </div>
        <br>

        <div class="button-container">
          <button type="submit" class="button">Continue</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Show/hide specify field based on debate experience selection
    document.addEventListener('DOMContentLoaded', function() {
      const debateExperience = document.getElementById('debateExperience');
      const specifyContainer = document.getElementById('debateTrainingSpecifyContainer');
      const specifyField = document.getElementById('debateTrainingSpecify');
      
      function updateSpecifyVisibility() {
        if (debateExperience.value === 'No experience' || debateExperience.value === '' || debateExperience.value === 'Prefer not to say') {
          specifyContainer.style.display = 'none';
          specifyField.value = '';
          specifyField.removeAttribute('required');
        } else {
          specifyContainer.style.display = 'block';
          specifyField.setAttribute('required', 'required');
        }
      }
      
      debateExperience.addEventListener('change', updateSpecifyVisibility);
      
      // Initial state check
      updateSpecifyVisibility();
    });
  </script>
  <script src="/button-disable.js"></script>
</body>

</html>